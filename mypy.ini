[mypy]
# SQLAlchemy plugin for ORM type checking
plugins = sqlalchemy.ext.mypy.plugin

# Python version
python_version = 3.12

# Strictness settings - start lenient, gradually increase
# TODO: Enable these incrementally as code improves:
#   - check_untyped_defs = True (431 errors currently)
#   - disallow_incomplete_defs = True (368 errors currently)
#   - warn_return_any = True (198 errors currently)
warn_return_any = False
warn_unused_configs = True
warn_unused_ignores = True
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = False
disallow_untyped_decorators = False

# Be lenient with missing imports for third-party libraries
ignore_missing_imports = True

# Don't require explicit Optional for None defaults (common pattern)
no_implicit_optional = False

# Show error codes
show_error_codes = True
show_column_numbers = True
show_error_context = True

# Incremental mode for faster checking
incremental = True
cache_dir = .mypy_cache

# Exclude patterns
exclude = (?x)(
    ^\.venv/
    | ^venv/
    | ^build/
    | ^dist/
    | ^\.git/
    | ^__pycache__/
    | \.pyc$
    | ^migrations/
  )

# Per-module settings
[mypy-tests.*]
# Be more lenient with test files
disallow_untyped_defs = False
disallow_incomplete_defs = False

[mypy-src.adapters.google_ad_manager_original]
# Legacy file - ignore for now
ignore_errors = True

[mypy-src.core.database.models]
# SQLAlchemy models - be lenient with model definitions
disallow_untyped_defs = False

[mypy-alembic.*]
ignore_missing_imports = True

[mypy-googleads.*]
ignore_missing_imports = True

[mypy-google.ads.*]
ignore_missing_imports = True

[mypy-flask.*]
ignore_missing_imports = True

[mypy-sqlalchemy.*]
ignore_missing_imports = False

[mypy-src.core.schemas_generated.*]
# Auto-generated schemas from AdCP JSON Schema
# These are generated by datamodel-codegen and may have type issues
ignore_errors = True
